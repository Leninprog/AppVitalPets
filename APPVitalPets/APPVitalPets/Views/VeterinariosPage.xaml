<?xml version="1.0" encoding="utf-8"?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:sys="clr-namespace:System;assembly=netstandard"
    x:Class="APPVitalPets.Views.VeterinariosPage"
    Title="Veterinarios"
    BackgroundColor="{AppThemeBinding Light={StaticResource VeryLightGray}, Dark={StaticResource OffBlack}}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <!-- Header -->
            <Grid ColumnDefinitions="Auto,*" ColumnSpacing="15">
                <Button
                    Grid.Column="0"
                    Text="â† Mascotas"
                    Clicked="OnVolverMascotasClicked"
                    BackgroundColor="{StaticResource SoftBlue}"
                    TextColor="{StaticResource White}"
                    HeightRequest="45"
                    Padding="15,0"
                    FontSize="14"
                    FontAttributes="Bold" />

                <Label
                    Grid.Column="1"
                    Text="ðŸ¾ GestiÃ³n de Veterinarios"
                    FontSize="22"
                    FontAttributes="Bold"
                    VerticalOptions="Center"
                    HorizontalOptions="Center"
                    TextColor="{StaticResource DarkSlateGray}" />
            </Grid>

            <!-- Nuevo Veterinario -->
            <Button
                Text="+ Nuevo Veterinario"
                Clicked="OnMostrarFormularioClicked"
                BackgroundColor="{StaticResource SoftBlue}"
                TextColor="{StaticResource Black}"
                FontAttributes="Bold"
                FontSize="16"
                HeightRequest="50"
                Margin="0,5,0,0" />

            <!-- Formulario -->
            <Frame
                x:Name="FormularioVet"
                IsVisible="False"
                Padding="25"
                BorderColor="{StaticResource SoftBlue}"
                BackgroundColor="{StaticResource VeryLightGray}"
                HasShadow="True">

                <VerticalStackLayout Spacing="18">

                    <Label
                        Text="ðŸ“‹ Nuevo Veterinario"
                        FontSize="18"
                        FontAttributes="Bold"
                        TextColor="{StaticResource SoftBlue}"
                        HorizontalOptions="Center"
                        Margin="0,0,0,10"/>

                    <!-- Nombre -->
                    <VerticalStackLayout Spacing="5">
                        <Label
                            Text="ðŸ‘©â€âš• Nombre"
                            FontSize="14"
                            FontAttributes="Bold"
                            TextColor="{StaticResource MediumGray}"/>
                        <Frame Padding="0" HasShadow="False" BorderColor="{StaticResource SoftBlue}" BackgroundColor="{StaticResource Black}">
                            <Entry
                                x:Name="NombreVetEntry"
                                Placeholder="Ej: Dra. GÃ³mez"
                                BackgroundColor="Transparent"
                                TextColor="{StaticResource DarkSlateGray}"
                                PlaceholderColor="{StaticResource LightGray}"
                                HeightRequest="45"
                                FontSize="15"/>
                        </Frame>
                    </VerticalStackLayout>

                    <!-- Especialidad -->
                    <VerticalStackLayout Spacing="5">
                        <Label
                            Text="ðŸ¥ Especialidad"
                            FontSize="14"
                            FontAttributes="Bold"
                            TextColor="{StaticResource MediumGray}"/>
                        <Frame Padding="0" HasShadow="False" BorderColor="{StaticResource SoftBlue}" BackgroundColor="{StaticResource White}">
                            <Entry
                                x:Name="EspecialidadEntry"
                                Placeholder="Ej: CardiologÃ­a"
                                BackgroundColor="Transparent"
                                TextColor="{StaticResource DarkSlateGray}"
                                PlaceholderColor="{StaticResource LightGray}"
                                HeightRequest="45"
                                FontSize="15"/>
                        </Frame>
                    </VerticalStackLayout>

                    <!-- TelÃ©fono -->
                    <VerticalStackLayout Spacing="5">
                        <Label
                            Text="ðŸ“ž TelÃ©fono"
                            FontSize="14"
                            FontAttributes="Bold"
                            TextColor="{StaticResource MediumGray}"/>
                        <Frame Padding="0" HasShadow="False" BorderColor="{StaticResource SoftBlue}" BackgroundColor="{StaticResource White}">
                            <Entry
                                x:Name="TelefonoVetEntry"
                                Placeholder="Ej: 0987654321"
                                Keyboard="Telephone"
                                BackgroundColor="Transparent"
                                TextColor="{StaticResource DarkSlateGray}"
                                PlaceholderColor="{StaticResource LightGray}"
                                HeightRequest="45"
                                FontSize="15"/>
                        </Frame>
                    </VerticalStackLayout>

                    <!-- Correo -->
                    <VerticalStackLayout Spacing="5">
                        <Label
                            Text="âœ‰ Correo"
                            FontSize="14"
                            FontAttributes="Bold"
                            TextColor="{StaticResource MediumGray}"/>
                        <Frame Padding="0" HasShadow="False" BorderColor="{StaticResource SoftBlue}" BackgroundColor="{StaticResource Black}">
                            <Entry
                                x:Name="CorreoVetEntry"
                                Placeholder="ejemplo@correo.com"
                                Keyboard="Email"
                                BackgroundColor="Transparent"
                                TextColor="{StaticResource DarkSlateGray}"
                                PlaceholderColor="{StaticResource LightGray}"
                                HeightRequest="45"
                                FontSize="15"/>
                        </Frame>
                    </VerticalStackLayout>

                    <!-- Botones -->
                    <HorizontalStackLayout Spacing="15" HorizontalOptions="Center" Margin="0,15,0,0">
                        <Button
                            x:Name="RegistrarVetBtn"
                            Text="âœ… Registrar"
                            Clicked="OnRegistrarVetClicked"
                            BackgroundColor="{StaticResource SoftGreen}"
                            TextColor="{StaticResource DarkSlateGray}"
                            WidthRequest="130"
                            HeightRequest="45"
                            FontSize="15"
                            FontAttributes="Bold"/>
                        <Button
                            x:Name="ActualizarVetBtn"
                            Text="ðŸ”„ Actualizar"
                            Clicked="OnActualizarVetClicked"
                            IsVisible="False"
                            BackgroundColor="{StaticResource SoftOrange}"
                            TextColor="{StaticResource DarkSlateGray}"
                            WidthRequest="130"
                            HeightRequest="45"
                            FontSize="15"
                            FontAttributes="Bold"/>
                    </HorizontalStackLayout>

                </VerticalStackLayout>
            </Frame>

            <!-- Lista de Veterinarios -->
            <Frame
                BorderColor="{StaticResource LightGray}"
                Padding="0"
                BackgroundColor="{StaticResource Black}"
                HasShadow="True">

                <VerticalStackLayout>
                    <Frame
                        BackgroundColor="{StaticResource Black}"
                        Padding="20,15"
                        HasShadow="False">
                        <Label
                            Text="ðŸ“‹ Veterinarios Registrados"
                            FontSize="18"
                            FontAttributes="Bold"
                            TextColor="{StaticResource Black}"
                            HorizontalOptions="Center"/>
                    </Frame>

                    <CollectionView
                        x:Name="VetsList"
                        SelectionMode="None"
                        Margin="10"
                        BackgroundColor="Black">
                        <CollectionView.Header>
                            <Grid
                                Padding="15,12"
                                ColumnSpacing="10"
                                BackgroundColor="{StaticResource VeryLightGray}"
                                HeightRequest="50">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="1.5*" />
                                </Grid.ColumnDefinitions>
                                <Label Text="ðŸ‘©â€âš• Nombre" FontAttributes="Bold" Grid.Column="0" TextColor="{StaticResource SoftBlue}" FontSize="14" VerticalOptions="Center"/>
                                <Label Text="ðŸ¥ Especialidad" FontAttributes="Bold" Grid.Column="1" TextColor="{StaticResource SoftBlue}" FontSize="14" VerticalOptions="Center"/>
                                <Label Text="ðŸ“ž TelÃ©fono" FontAttributes="Bold" Grid.Column="2" TextColor="{StaticResource SoftBlue}" FontSize="14" VerticalOptions="Center"/>
                                <Label Text="âœ‰ Correo" FontAttributes="Bold" Grid.Column="3" TextColor="{StaticResource SoftBlue}" FontSize="14" VerticalOptions="Center"/>
                                <Label Text="âš™ Acciones" FontAttributes="Bold" Grid.Column="4" TextColor="{StaticResource SoftBlue}" FontSize="14" VerticalOptions="Center"/>
                            </Grid>
                        </CollectionView.Header>
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame
                                    BackgroundColor="{StaticResource Gray300}"
                                    Padding="0"
                                    Margin="0,5"
                                    BorderColor="{StaticResource LightGray}">
                                    <Grid Padding="15" ColumnSpacing="10" HeightRequest="65">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="2*" />
                                            <ColumnDefinition Width="2*" />
                                            <ColumnDefinition Width="2*" />
                                            <ColumnDefinition Width="2*" />
                                            <ColumnDefinition Width="1.5*" />
                                        </Grid.ColumnDefinitions>

                                        <Label
                                            Text="{Binding Nombre}"
                                            Grid.Column="0"
                                            FontSize="15"
                                            FontAttributes="Bold"
                                            TextColor="{StaticResource DarkSlateGray}"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Text="{Binding Especialidad}"
                                            Grid.Column="1"
                                            FontSize="14"
                                            TextColor="{StaticResource MediumGray}"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Text="{Binding Telefono}"
                                            Grid.Column="2"
                                            FontSize="14"
                                            TextColor="{StaticResource MediumGray}"
                                            VerticalOptions="Center"/>
                                        <Label
                                            Text="{Binding Correo}"
                                            Grid.Column="3"
                                            FontSize="14"
                                            TextColor="{StaticResource MediumGray}"
                                            VerticalOptions="Center"
                                            LineBreakMode="TailTruncation"
                                            MaxLines="2"/>

                                        <HorizontalStackLayout
                                            Grid.Column="4"
                                            Spacing="8"
                                            HorizontalOptions="Center"
                                            VerticalOptions="Center">
                                            <Button
                                                Text="âœ"
                                                Clicked="OnEditarVetClicked"
                                                CommandParameter="{Binding .}"
                                                BackgroundColor="{StaticResource SoftOrange}"
                                                TextColor="White"
                                                WidthRequest="38"
                                                HeightRequest="38"
                                                FontSize="14"
                                                Padding="0"/>
                                            <Button
                                                Text="ðŸ—‘"
                                                Clicked="OnEliminarVetClicked"
                                                CommandParameter="{Binding Id}"
                                                BackgroundColor="#E57373"
                                                TextColor="White"
                                                WidthRequest="38"
                                                HeightRequest="38"
                                                FontSize="14"
                                                Padding="0"/>
                                        </HorizontalStackLayout>
                                    </Grid>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>